{% extends "base_auth.html" %}
{% load i18n %}
{% load staticfiles %}

{% block title %}
  <TITLE>{% trans "Reports" %} - Das Aktienregister</TITLE>
{% endblock %}

{% block ng_app %}js.darg.app.reports{% endblock %}

{% block content %}
<div ng_controller="ReportsController">
  {% include "_messages.html" %}
  {% include "_form_errors.html" %}
  {% for operator in request.user.operator_set.all %}
    <script>company_id = {{operator.company.id}}</script>
    <h2>{% trans "Reports and Downloads for " %} {{operator.company}}</h2>
	<div class="note">{% trans "Use CSV for Excel like Downloads. Follow this <a href='https://goo.gl/aQ2gVx'>guide for instructions</a>." %}</div>
    <div>
      <ul>
        <li>
          {% trans "Download active Shareholders as" %}
          <a href="{% url "captable_pdf" company_id=operator.company.id %}" title="{% trans "Download active Shareholders as PDF" %}" class="btn btn-inline">
            {% trans "PDF" %}
          </a> |
          <a href="{% url "captable_csv" company_id=operator.company.id %}" title="{% trans "Download active Shareholders as CSV" %}" class="btn btn-inline">
            {% trans "CSV" %}
          </a>
		  <span class="el-icon-envelope"></span>
        </li>
        <li>
		  {% trans "Transactions per security in period" %}
		  <span class="el-icon-chevron-down" ng-click="toggle_transaction_form()"></span>

		  <! -- FORM -->
		  {% verbatim %}
		  <div ng-show="show_transaction_form">
            <form class="form-inline add-information-inline form">
              <div class="form-group block-level">
                {% endverbatim %} {% trans "from" %} {% verbatim %}
                <span class="input-group date-field">
                  <input type="text" class="form-control"
                    ng-model="transactions_download_params.from"
                    uib-datepicker-popup="{{ datepicker1.format }}"
                    datepicker-options="datepicker1.options"
                    is-open="datepicker1.opened"
                    show-button-bar="true"
                    close-text="Schliessen"
                    clear-text="Leeren"
                    current-text="Heute"
                    />
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="open_datepicker1()"><i class="glyphicon glyphicon-calendar"></i></button>
                  </span>
                </span>
                {% endverbatim %} {% trans "to" %} {% verbatim %}
                <span class="input-group date-field">
                  <input type="text" class="form-control"
                    ng-model="transactions_download_params.to"
                    uib-datepicker-popup="{{ datepicker2.format }}"
                    datepicker-options="datepicker2.options"
                    is-open="datepicker2.opened"
                    show-button-bar="true"
                    close-text="Schliessen"
                    clear-text="Leeren"
                    current-text="Heute"
                    />
                  <span class="input-group-btn">
                    <button type="button" class="btn btn-default" ng-click="open_datepicker2()"><i class="glyphicon glyphicon-calendar"></i></button>
                  </span>
                </span>
                <select class="form-control security" ng-model="transactions_download_params.security" ng-options="security as security.readable_title for security in securities" translate translate-attr-placeholder="Security">
                  <option value='' disabled>{% endverbatim %}{% trans "Security" %}{% verbatim %}</option>
                </select>
              <div class="form-group">
                <button class="btn btn-default cancel" ng-click="toggle_transaction_form()">{% endverbatim %}{% trans "Cancel" %}{% verbatim %}</button>
                <a href="{{transaction_download_url}}" class="btn btn-focus" ng-click="fetch_transaction_download()" ng-disabled="!enable_transaction_download">{% endverbatim %}{% trans "Download" %}{% verbatim %}</a>
              </div>
            </form>
		  </div> <!-- form end -->
		  {% endverbatim %}
		</li>
        <li>
          {% trans "Address data of all shareholders" %}
          <a href="{% url "contacts_csv" company_id=operator.company.id %}" title="{% trans "Address data of all shareholders" %}">
            <span class="el-icon-download-alt"></span>
          </a>
        </li>
        <!--<li><a href="" title="">{% trans "Printed Certificates" %}</a></li>-->
        <!--<li><a href="" title="">{% trans "Vested Shares" %}</a></li>-->
        <!-- <li><a href="" title="">{% trans "Depot Statement per Shareholder" %}</a></li> -->
      </ul>
    </div>
  {% endfor %}
</div>
{% endblock %}
